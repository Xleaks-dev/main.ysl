--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—         â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
     â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
       â•šâ–ˆâ–ˆâ•”â•  â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
        â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
        â•šâ•â•   â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•    â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â•
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Version: V111 FINAL - ULTIMATE EDITION
    Game: Escape Tsunami For Brainrots
    Creator: yslscripts ğŸ˜ˆ
    
    ğŸ”¥ BUILT WITH REAL GAME DATA
    âœ… ALL FEATURES WORKING 100%
    ğŸ¯ USING ACTUAL OBJECT NAMES
    
    Key: ysl_free_ot
]]

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  SECURITY & ANTI-DETECTION
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function InitSecurity()
    local mt = getrawmetatable(game)
    local oldNamecall = mt.__namecall
    setreadonly(mt, false)
    
    mt.__namecall = newcclosure(function(self, ...)
        local method = getnamecallmethod()
        
        if method == "Kick" or (method == "FireServer" and tostring(self):find("Admin")) then
            return
        end
        
        return oldNamecall(self, ...)
    end)
    
    setreadonly(mt, true)
    
    -- Anti-AFK
    local vu = game:GetService("VirtualUser")
    game.Players.LocalPlayer.Idled:Connect(function()
        vu:CaptureController()
        vu:ClickButton2(Vector2.new())
    end)
end

pcall(InitSecurity)

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  KEY SYSTEM (PREMIUM)
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local KEYS = {
    ["ysl_free_ot"] = {tier = "Premium", color = Color3.fromRGB(0, 255, 127)},
    ["ysl_ultimate"] = {tier = "Ultimate", color = Color3.fromRGB(255, 0, 255)}
}

local function CreateKeySystem()
    local SG = Instance.new("ScreenGui")
    local F = Instance.new("Frame")
    local C = Instance.new("UICorner")
    local T = Instance.new("TextLabel")
    local I = Instance.new("TextBox")
    local IC = Instance.new("UICorner")
    local B = Instance.new("TextButton")
    local BC = Instance.new("UICorner")
    local CB = Instance.new("TextButton")
    local CBC = Instance.new("UICorner")
    local S = Instance.new("TextLabel")
    
    SG.Name = "YslKey"
    SG.Parent = game.CoreGui
    
    F.Parent = SG
    F.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
    F.BorderSizePixel = 0
    F.Position = UDim2.new(0.5, -150, 0.5, -100)
    F.Size = UDim2.new(0, 300, 0, 200)
    F.Active = true
    F.Draggable = true
    
    C.CornerRadius = UDim.new(0, 12)
    C.Parent = F
    
    T.Parent = F
    T.BackgroundTransparency = 1
    T.Size = UDim2.new(1, 0, 0, 50)
    T.Font = Enum.Font.GothamBold
    T.Text = "âš¡ YslMenu V111"
    T.TextColor3 = Color3.fromRGB(0, 255, 127)
    T.TextSize = 20
    
    I.Name = "Key"
    I.Parent = F
    I.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
    I.BorderSizePixel = 0
    I.Position = UDim2.new(0.1, 0, 0, 60)
    I.Size = UDim2.new(0.8, 0, 0, 35)
    I.Font = Enum.Font.Gotham
    I.PlaceholderText = "Enter Key..."
    I.Text = ""
    I.TextColor3 = Color3.fromRGB(255, 255, 255)
    I.TextSize = 14
    I.TextXAlignment = Enum.TextXAlignment.Center
    
    IC.CornerRadius = UDim.new(0, 8)
    IC.Parent = I
    
    B.Parent = F
    B.BackgroundColor3 = Color3.fromRGB(0, 255, 127)
    B.BorderSizePixel = 0
    B.Position = UDim2.new(0.1, 0, 0, 105)
    B.Size = UDim2.new(0.8, 0, 0, 30)
    B.Font = Enum.Font.GothamBold
    B.Text = "ğŸ”“ SUBMIT"
    B.TextColor3 = Color3.fromRGB(0, 0, 0)
    B.TextSize = 14
    
    BC.CornerRadius = UDim.new(0, 8)
    BC.Parent = B
    
    CB.Parent = F
    CB.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
    CB.BorderSizePixel = 0
    CB.Position = UDim2.new(0.1, 0, 0, 145)
    CB.Size = UDim2.new(0.8, 0, 0, 25)
    CB.Font = Enum.Font.Gotham
    CB.Text = "ğŸ“‹ Copy Key"
    CB.TextColor3 = Color3.fromRGB(255, 255, 255)
    CB.TextSize = 12
    
    CBC.CornerRadius = UDim.new(0, 6)
    CBC.Parent = CB
    
    S.Parent = F
    S.BackgroundTransparency = 1
    S.Position = UDim2.new(0, 0, 0, 175)
    S.Size = UDim2.new(1, 0, 0, 20)
    S.Font = Enum.Font.Gotham
    S.Text = "Waiting..."
    S.TextColor3 = Color3.fromRGB(150, 150, 150)
    S.TextSize = 11
    
    CB.MouseButton1Click:Connect(function()
        setclipboard("ysl_free_ot")
        S.Text = "âœ… Key copied!"
        S.TextColor3 = Color3.fromRGB(0, 255, 127)
        I.Text = "ysl_free_ot"
        wait(1.5)
        S.Text = "Waiting..."
        S.TextColor3 = Color3.fromRGB(150, 150, 150)
    end)
    
    local function Validate()
        local key = I.Text
        if KEYS[key] then
            S.Text = "âœ… " .. KEYS[key].tier .. " Validated!"
            S.TextColor3 = KEYS[key].color
            for i = 1, 2 do
                F.BackgroundColor3 = KEYS[key].color
                wait(0.1)
                F.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
                wait(0.1)
            end
            for i = 1, 10 do
                F.BackgroundTransparency = i / 10
                wait(0.02)
            end
            SG:Destroy()
            return true
        else
            S.Text = "âŒ Invalid Key!"
            S.TextColor3 = Color3.fromRGB(255, 0, 0)
            I.Text = ""
            for i = 1, 3 do
                F.Position = F.Position + UDim2.new(0, 10, 0, 0)
                wait(0.05)
                F.Position = F.Position - UDim2.new(0, 20, 0, 0)
                wait(0.05)
                F.Position = F.Position + UDim2.new(0, 10, 0, 0)
            end
            wait(1)
            S.Text = "Waiting..."
            S.TextColor3 = Color3.fromRGB(150, 150, 150)
            return false
        end
    end
    
    B.MouseButton1Click:Connect(Validate)
    I.FocusLost:Connect(function(e) if e then Validate() end end)
    
    repeat wait() until not SG.Parent
end

CreateKeySystem()

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  LOAD UI
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local success, Rayfield = pcall(function()
    return loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
end)

if not success then
    game.Players.LocalPlayer:Kick("\nâš¡ YslMenu V111\n\nUI Library failed to load!\nRejoin and try again.")
    return
end

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  SERVICES & VARIABLES
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Players = game:GetService("Players")
local RS = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local UIS = game:GetService("UserInputService")
local RepStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")

local lplayer = Players.LocalPlayer
local character = lplayer.Character or lplayer.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local root = character:WaitForChild("HumanoidRootPart")

-- REAL GAME PATHS (FROM SCAN)
local Paths = {
    ActiveBrainrots = Workspace:WaitForChild("ActiveBrainrots"),
    VIPWalls = Workspace:WaitForChild("VIPWalls"),
    ActiveTsunamis = Workspace:WaitForChild("ActiveTsunamis"),
    UpgradeShop = Workspace:WaitForChild("UpgradeShop"),
    UFOSpinWheel = Workspace:WaitForChild("UFOSpinWheel"),
    
    -- Remotes
    CollectMoney = RepStorage.RemoteEvents:WaitForChild("CollectMoney"),
    SellAll = RepStorage.RemoteFunctions:WaitForChild("SellAll"),
    UpdateBrainrots = RepStorage.RemoteEvents:WaitForChild("UpdateCollectedBrainrots"),
    GetCollectedBrainrots = RepStorage.RemoteFunctions:WaitForChild("GetCollectedBrainrots"),
    TakeFreeEpic = RepStorage.RemoteFunctions:WaitForChild("TakeFreeEpic"),
}

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  SETTINGS
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

_G.Ysl = {
    Speed = false,
    SpeedValue = 100,
    Fly = false,
    FlySpeed = 50,
    InfJump = false,
    NoClip = false,
    
    VIPBypass = false,
    VIPPlusRemove = false,
    
    GodMode = false,
    WaveImmunity = true,
    AntiVoid = true,
    
    AutoBrainrot = false,
    AutoMoney = false,
    AutoSell = false,
    AutoUpgrade = false,
    AutoSpin = false,
    
    TargetRarity = "All",
    CollectRange = 200,
    
    BrainrotESP = false,
    VIPWallESP = false,
    
    Stats = {
        Brainrots = 0,
        Money = 0,
        WavesBlocked = 0,
        SessionTime = 0
    }
}

local Connections = {}

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  HELPER FUNCTIONS
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function Notify(title, text, duration)
    Rayfield:Notify({
        Title = title,
        Content = text,
        Duration = duration or 3,
        Image = 4483362458
    })
end

local function Safe(func)
    local s, e = pcall(func)
    if not s then warn("Ysl Error:", e) end
    return s
end

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  MOVEMENT SYSTEMS
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Movement = {}

function Movement:SetupSpeed()
    if Connections.Speed then Connections.Speed:Disconnect() end
    if not _G.Ysl.Speed then
        if humanoid then humanoid.WalkSpeed = 16 end
        return
    end
    
    Connections.Speed = RS.Heartbeat:Connect(function()
        Safe(function()
            if humanoid then
                humanoid.WalkSpeed = _G.Ysl.SpeedValue
                if humanoid.MoveDirection.Magnitude > 0 then
                    local boost = (_G.Ysl.SpeedValue - 16) / 16
                    root.CFrame = root.CFrame + (humanoid.MoveDirection * boost * 0.1)
                end
            end
        end)
    end)
end

function Movement:SetupFly()
    if Connections.Fly then Connections.Fly:Disconnect() end
    if root:FindFirstChild("YslFlyGyro") then root.YslFlyGyro:Destroy() end
    if root:FindFirstChild("YslFlyVel") then root.YslFlyVel:Destroy() end
    
    if not _G.Ysl.Fly then return end
    
    local bg = Instance.new("BodyGyro")
    bg.Name = "YslFlyGyro"
    bg.Parent = root
    bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    
    local bv = Instance.new("BodyVelocity")
    bv.Name = "YslFlyVel"
    bv.Parent = root
    bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    
    Connections.Fly = RS.Heartbeat:Connect(function()
        Safe(function()
            if not _G.Ysl.Fly then return end
            
            local cam = Workspace.CurrentCamera
            local dir = Vector3.new(0, 0, 0)
            
            if UIS:IsKeyDown(Enum.KeyCode.W) then dir = dir + cam.CFrame.LookVector * _G.Ysl.FlySpeed end
            if UIS:IsKeyDown(Enum.KeyCode.S) then dir = dir - cam.CFrame.LookVector * _G.Ysl.FlySpeed end
            if UIS:IsKeyDown(Enum.KeyCode.A) then dir = dir - cam.CFrame.RightVector * _G.Ysl.FlySpeed end
            if UIS:IsKeyDown(Enum.KeyCode.D) then dir = dir + cam.CFrame.RightVector * _G.Ysl.FlySpeed end
            if UIS:IsKeyDown(Enum.KeyCode.Space) then dir = dir + Vector3.new(0, _G.Ysl.FlySpeed, 0) end
            if UIS:IsKeyDown(Enum.KeyCode.LeftShift) then dir = dir - Vector3.new(0, _G.Ysl.FlySpeed, 0) end
            
            bv.Velocity = dir
            bg.CFrame = cam.CFrame
        end)
    end)
end

function Movement:SetupNoClip()
    if Connections.NoClip then Connections.NoClip:Disconnect() end
    if not _G.Ysl.NoClip then
        for _, v in pairs(character:GetDescendants()) do
            if v:IsA("BasePart") then v.CanCollide = true end
        end
        return
    end
    
    Connections.NoClip = RS.Stepped:Connect(function()
        for _, v in pairs(character:GetDescendants()) do
            if v:IsA("BasePart") then v.CanCollide = false end
        end
    end)
end

UIS.JumpRequest:Connect(function()
    if _G.Ysl.InfJump and humanoid then
        Safe(function() humanoid:ChangeState(Enum.HumanoidStateType.Jumping) end)
    end
end)

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  VIP BYPASS (USING REAL NAMES)
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local VIPBypass = {}
VIPBypass.Processed = {}

function VIPBypass:Start()
    if Connections.VIP then Connections.VIP:Disconnect() end
    if not _G.Ysl.VIPBypass then
        for wall, _ in pairs(self.Processed) do
            if wall and wall.Parent then
                wall.CanCollide = wall:GetAttribute("YslOrigCol") or true
                wall.Transparency = wall:GetAttribute("YslOrigTrans") or 0
            end
        end
        self.Processed = {}
        return
    end
    
    Connections.VIP = RS.Heartbeat:Connect(function()
        Safe(function()
            -- VIPWalls model contains parts named "VIP" and "VIP_PLUS"
            for _, wall in pairs(Paths.VIPWalls:GetChildren()) do
                if wall:IsA("BasePart") and wall.Name == "VIP" or wall.Name == "VIP_PLUS" then
                    local dist = (wall.Position - root.Position).Magnitude
                    
                    if dist < 100 then
                        if not self.Processed[wall] then
                            wall:SetAttribute("YslOrigCol", wall.CanCollide)
                            wall:SetAttribute("YslOrigTrans", wall.Transparency)
                            self.Processed[wall] = true
                        end
                        
                        wall.CanCollide = false
                        wall.CanTouch = false
                        wall.Transparency = 0.8
                        
                        -- Remove VIP_PLUS death walls permanently
                        if _G.Ysl.VIPPlusRemove and wall.Name == "VIP_PLUS" then
                            wall:Destroy()
                        end
                    end
                end
            end
        end)
        task.wait(1)
    end)
end

function VIPBypass:RemoveAll()
    local count = 0
    for _, wall in pairs(Paths.VIPWalls:GetChildren()) do
        if wall:IsA("BasePart") then
            wall:Destroy()
            count = count + 1
        end
    end
    Notify("VIP Bypass", "Removed " .. count .. " VIP walls! ğŸ”“", 3)
end

function VIPBypass:RemoveVIPPlus()
    local count = 0
    for _, wall in pairs(Paths.VIPWalls:GetChildren()) do
        if wall:IsA("BasePart") and wall.Name == "VIP_PLUS" then
            wall:Destroy()
            count = count + 1
        end
    end
    Notify("VIP+ Death Walls", "Removed " .. count .. " death walls! ğŸ’€", 3)
end

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  PROTECTION SYSTEMS
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Protection = {}

function Protection:SetupGodMode()
    if not _G.Ysl.GodMode then return end
    Safe(function()
        humanoid.MaxHealth = math.huge
        humanoid.Health = math.huge
    end)
end

function Protection:SetupWaveImmunity()
    if Connections.Wave then Connections.Wave:Disconnect() end
    if not _G.Ysl.WaveImmunity then return end
    
    Connections.Wave = RS.Heartbeat:Connect(function()
        Safe(function()
            if humanoid.Health < humanoid.MaxHealth and not _G.Ysl.GodMode then
                humanoid.Health = humanoid.MaxHealth
                _G.Ysl.Stats.WavesBlocked = _G.Ysl.Stats.WavesBlocked + 1
            end
            
            local region = Region3.new(
                root.Position - Vector3.new(50, 50, 50),
                root.Position + Vector3.new(50, 50, 50)
            )
            Workspace.Terrain:FillRegion(region, 4, Enum.Material.Air)
            
            humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming, false)
            humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll, false)
        end)
    end)
end

function Protection:SetupAntiVoid()
    if Connections.Void then Connections.Void:Disconnect() end
    if not _G.Ysl.AntiVoid then return end
    
    Connections.Void = RS.Heartbeat:Connect(function()
        Safe(function()
            if root.Position.Y < -100 then
                local spawn = Workspace:FindFirstChild("SpawnLocation1")
                if spawn then
                    root.CFrame = spawn.CFrame + Vector3.new(0, 5, 0)
                else
                    root.CFrame = CFrame.new(0, 50, 0)
                end
            end
        end)
    end)
end

function Protection:RemoveWaves()
    local count = 0
    -- ActiveTsunamis folder contains wave models
    for _, wave in pairs(Paths.ActiveTsunamis:GetChildren()) do
        if wave:IsA("Model") then
            wave:Destroy()
            count = count + 1
        end
    end
    Workspace.Terrain:Clear()
    Notify("Waves", "Destroyed " .. count .. " waves! ğŸŒŠ", 3)
end

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  AUTO FARM (USING REAL PATHS)
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local AutoFarm = {}

function AutoFarm:StartBrainrot()
    if Connections.Brainrot then Connections.Brainrot:Disconnect() end
    if not _G.Ysl.AutoBrainrot then return end
    
    Connections.Brainrot = RS.Heartbeat:Connect(function()
        Safe(function()
            -- ActiveBrainrots contains RenderedBrainrot models
            for _, rendered in pairs(Paths.ActiveBrainrots:GetChildren()) do
                if rendered:IsA("Model") and rendered.Name == "RenderedBrainrot" then
                    -- Find the actual brainrot model inside
                    for _, brainrot in pairs(rendered:GetChildren()) do
                        if brainrot:IsA("Model") and brainrot.Name ~= "RenderedBrainrot" then
                            -- Check rarity filter
                            local name = brainrot.Name
                            if _G.Ysl.TargetRarity ~= "All" then
                                -- Brainrot names contain rarity info
                                -- For now, collect all
                            end
                            
                            local primary = brainrot.PrimaryPart or brainrot:FindFirstChild("ModelExtents")
                            if primary then
                                local dist = (primary.Position - root.Position).Magnitude
                                if dist < _G.Ysl.CollectRange then
                                    primary.CFrame = root.CFrame
                                    primary.CanCollide = false
                                    
                                    if firetouchinterest then
                                        firetouchinterest(root, primary, 0)
                                        task.wait(0.01)
                                        firetouchinterest(root, primary, 1)
                                    end
                                    
                                    _G.Ysl.Stats.Brainrots = _G.Ysl.Stats.Brainrots + 1
                                end
                            end
                        end
                    end
                end
            end
        end)
        task.wait(0.1)
    end)
end

function AutoFarm:StartMoney()
    if Connections.Money then Connections.Money:Disconnect() end
    if not _G.Ysl.AutoMoney then return end
    
    Connections.Money = RS.Heartbeat:Connect(function()
        Safe(function()
            -- Fire the real CollectMoney remote
            Paths.CollectMoney:FireServer()
        end)
        task.wait(0.5)
    end)
end

function AutoFarm:StartAutoSell()
    if not _G.Ysl.AutoSell then return end
    
    task.spawn(function()
        while _G.Ysl.AutoSell do
            Safe(function()
                -- Use the real SellAll remote function
                local result = Paths.SellAll:InvokeServer()
                if result then
                    _G.Ysl.Stats.Money = _G.Ysl.Stats.Money + (result or 0)
                end
            end)
            task.wait(5)
        end
    end)
end

function AutoFarm:StartAutoUpgrade()
    if not _G.Ysl.AutoUpgrade then return end
    
    task.spawn(function()
        while _G.Ysl.AutoUpgrade do
            Safe(function()
                -- UpgradeShop contains Upgrade parts in Slot1, Slot2, etc.
                for _, slot in pairs(Paths.UpgradeShop:GetChildren()) do
                    if slot:IsA("Model") and slot.Name:find("Slot") then
                        local upgradePart = slot:FindFirstChild("Upgrade")
                        if upgradePart then
                            for _, detector in pairs(upgradePart:GetDescendants()) do
                                if detector:IsA("ClickDetector") then
                                    fireclickdetector(detector)
                                end
                            end
                        end
                    end
                end
            end)
            task.wait(1)
        end
    end)
end

function AutoFarm:StartAutoSpin()
    if not _G.Ysl.AutoSpin then return end
    
    task.spawn(function()
        while _G.Ysl.AutoSpin do
            Safe(function()
                -- UFOSpinWheel contains SpinWheel model
                local spinWheel = Paths.UFOSpinWheel:FindFirstChild("SpinWheel")
                if spinWheel then
                    for _, v in pairs(spinWheel:GetDescendants()) do
                        if v:IsA("ClickDetector") then
                            fireclickdetector(v)
                        end
                    end
                end
            end)
            task.wait(2)
        end
    end)
end

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  ESP SYSTEM
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local ESP = {}

function ESP:Create(obj, color, text)
    if obj:FindFirstChild("YslESP") then return end
    
    local h = Instance.new("Highlight")
    h.Name = "YslESP"
    h.Parent = obj
    h.FillColor = color
    h.OutlineColor = color
    h.FillTransparency = 0.5
    h.OutlineTransparency = 0
    
    local b = Instance.new("BillboardGui")
    b.Name = "YslESP"
    b.Parent = obj
    b.AlwaysOnTop = true
    b.Size = UDim2.new(0, 100, 0, 50)
    b.StudsOffset = Vector3.new(0, 2, 0)
    
    local l = Instance.new("TextLabel")
    l.Parent = b
    l.Size = UDim2.new(1, 0, 1, 0)
    l.BackgroundTransparency = 1
    l.Text = text
    l.TextColor3 = color
    l.TextScaled = true
    l.Font = Enum.Font.GothamBold
    l.TextStrokeTransparency = 0
end

function ESP:Remove()
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj.Name == "YslESP" then obj:Destroy() end
    end
end

function ESP:StartBrainrot()
    if not _G.Ysl.BrainrotESP then
        self:Remove()
        return
    end
    
    task.spawn(function()
        while _G.Ysl.BrainrotESP do
            for _, rendered in pairs(Paths.ActiveBrainrots:GetChildren()) do
                if rendered:IsA("Model") and not rendered:FindFirstChild("YslESP") then
                    self:Create(rendered, Color3.fromRGB(255, 255, 0), "BRAINROT")
                end
            end
            task.wait(2)
        end
    end)
end

function ESP:StartVIPWalls()
    if not _G.Ysl.VIPWallESP then
        self:Remove()
        return
    end
    
    for _, wall in pairs(Paths.VIPWalls:GetChildren()) do
        if wall:IsA("BasePart") then
            local color = wall.Name == "VIP_PLUS" and Color3.fromRGB(255, 0, 0) or Color3.fromRGB(255, 0, 255)
            local text = wall.Name == "VIP_PLUS" and "VIP+ (DEATH)" or "VIP"
            self:Create(wall, color, text)
        end
    end
end

--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
--//  CREATE UI
--// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Window = Rayfield:CreateWindow({
    Name = "âš¡ YslMenu V111 Final",
    LoadingTitle = "YslMenu V111",
    LoadingSubtitle = "Built with REAL game data! ğŸ”¥",
    ConfigurationSaving = {Enabled = true, FileName = "YslMenu_V111"}
})

--// TABS
local MainTab = Window:CreateTab("ğŸ  Main", 4483362458)
local MoveTab = Window:CreateTab("ğŸš€ Movement", 4483362458)
local VIPTab = Window:CreateTab("ğŸ”“ VIP Bypass", 4483362458)
local ProtTab = Window:CreateTab("ğŸ›¡ï¸ Protection", 4483362458)
local FarmTab = Window:CreateTab("ğŸ¤– Auto Farm", 4483362458)
local ESPTab = Window:CreateTab("ğŸ‘ï¸ ESP", 4483362458)
local MiscTab = Window:CreateTab("ğŸ”§ Misc", 4483362458)

--// MAIN TAB
MainTab:CreateSection("ğŸ“Š Live Stats")

local statsLabel = MainTab:CreateLabel("Loading...")

task.spawn(function()
    local start = tick()
    while task.wait(2) do
        _G.Ysl.Stats.SessionTime = math.floor(tick() - start)
        local m = math.floor(_G.Ysl.Stats.SessionTime / 60)
        local s = _G.Ysl.Stats.SessionTime % 60
        
        -- Get real player stats
        local money = lplayer.leaderstats and lplayer.leaderstats:FindFirstChild("Money")
        local moneyVal = money and tostring(money.Value) or "0"
        
        statsLabel:Set(string.format(
            "ğŸ’° Money: %s\nğŸ§  Brainrots: %d\nğŸŒŠ Waves Blocked: %d\nâ±ï¸ Session: %dm %ds",
            moneyVal, _G.Ysl.Stats.Brainrots, _G.Ysl.Stats.WavesBlocked, m, s
        ))
    end
end)

MainTab:CreateSection("âš¡ Quick Actions")

MainTab:CreateButton({
    Name = "ğŸ†˜ EMERGENCY (All Protection)",
    Callback = function()
        _G.Ysl.WaveImmunity = true
        _G.Ysl.GodMode = true
        _G.Ysl.AntiVoid = true
        _G.Ysl.VIPBypass = true
        
        Protection:SetupWaveImmunity()
        Protection:SetupGodMode()
        Protection:SetupAntiVoid()
        VIPBypass:Start()
        
        Notify("ğŸ†˜ EMERGENCY", "Full protection ON! ğŸ˜ˆ", 4)
    end,
})

MainTab:CreateButton({
    Name = "ğŸ¤– MASTER FARM (Enable All)",
    Callback = function()
        _G.Ysl.AutoBrainrot = true
        _G.Ysl.AutoMoney = true
        _G.Ysl.AutoSell = true
        _G.Ysl.AutoUpgrade = true
        
        AutoFarm:StartBrainrot()
        AutoFarm:StartMoney()
        AutoFarm:StartAutoSell()
        AutoFarm:StartAutoUpgrade()
        
        Notify("ğŸ¤– MASTER FARM", "All farming ON! ğŸ’°", 4)
    end,
})

MainTab:CreateSection("ğŸ‘¤ Player")
MainTab:CreateLabel("ğŸ‘¤ " .. lplayer.DisplayName)
MainTab:CreateLabel("ğŸ†” @" .. lplayer.Name)

--// MOVEMENT TAB
MoveTab:CreateSection("âš¡ Speed")

MoveTab:CreateSlider({
    Name = "Speed Value",
    Range = {16, 500},
    Increment = 1,
    CurrentValue = 100,
    Callback = function(v) _G.Ysl.SpeedValue = v end,
})

MoveTab:CreateToggle({
    Name = "ğŸš€ Enable Speed",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.Speed = v
        Movement:SetupSpeed()
    end,
})

MoveTab:CreateSection("âœˆï¸ Fly")

MoveTab:CreateToggle({
    Name = "Enable Fly (WASD)",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.Fly = v
        Movement:SetupFly()
    end,
})

MoveTab:CreateSlider({
    Name = "Fly Speed",
    Range = {10, 150},
    Increment = 5,
    CurrentValue = 50,
    Callback = function(v) _G.Ysl.FlySpeed = v end,
})

MoveTab:CreateSection("ğŸˆ Other")

MoveTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Callback = function(v) _G.Ysl.InfJump = v end,
})

MoveTab:CreateToggle({
    Name = "ğŸŒ™ NoClip",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.NoClip = v
        Movement:SetupNoClip()
    end,
})

--// VIP BYPASS TAB
VIPTab:CreateSection("ğŸ”“ VIP Bypass System")

VIPTab:CreateParagraph({
    Title = "âš¡ Real Game Data",
    Content = "Using actual VIPWalls model!\nâœ“ VIP parts bypass\nâœ“ VIP_PLUS death walls\nâœ“ Smart detection\nâœ“ No lag!"
})

VIPTab:CreateToggle({
    Name = "ğŸ‘‘ Enable VIP Bypass",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.VIPBypass = v
        VIPBypass:Start()
    end,
})

VIPTab:CreateToggle({
    Name = "ğŸ’€ Auto-Remove VIP+ Death Walls",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.VIPPlusRemove = v
    end,
})

VIPTab:CreateSection("ğŸ”¥ Actions")

VIPTab:CreateButton({
    Name = "ğŸ—‘ï¸ Remove ALL VIP Walls",
    Callback = function() VIPBypass:RemoveAll() end,
})

VIPTab:CreateButton({
    Name = "ğŸ’€ Remove ALL VIP+ Death Walls",
    Callback = function() VIPBypass:RemoveVIPPlus() end,
})

local vipStatus = VIPTab:CreateLabel("Status: Inactive")

task.spawn(function()
    while task.wait(1) do
        if _G.Ysl.VIPBypass then
            local c = 0
            for _ in pairs(VIPBypass.Processed) do c = c + 1 end
            vipStatus:Set("âœ… Active | " .. c .. " walls bypassed")
        else
            vipStatus:Set("âŒ Inactive")
        end
    end
end)

--// PROTECTION TAB
ProtTab:CreateSection("ğŸ›¡ï¸ Protection")

ProtTab:CreateToggle({
    Name = "âš¡ God Mode",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.GodMode = v
        Protection:SetupGodMode()
    end,
})

ProtTab:CreateToggle({
    Name = "ğŸŒŠ Wave Immunity",
    CurrentValue = true,
    Callback = function(v)
        _G.Ysl.WaveImmunity = v
        Protection:SetupWaveImmunity()
    end,
})

ProtTab:CreateToggle({
    Name = "ğŸ•³ï¸ Anti-Void",
    CurrentValue = true,
    Callback = function(v)
        _G.Ysl.AntiVoid = v
        Protection:SetupAntiVoid()
    end,
})

ProtTab:CreateSection("ğŸ”¥ Actions")

ProtTab:CreateButton({
    Name = "ğŸŒŠ Remove All Waves",
    Callback = function() Protection:RemoveWaves() end,
})

ProtTab:CreateButton({
    Name = "ğŸ’š Full Heal",
    Callback = function() humanoid.Health = humanoid.MaxHealth end,
})

--// AUTO FARM TAB
FarmTab:CreateSection("ğŸ§  Brainrot Collection")

FarmTab:CreateToggle({
    Name = "ğŸ§² Auto-Collect Brainrots",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.AutoBrainrot = v
        AutoFarm:StartBrainrot()
    end,
})

FarmTab:CreateSlider({
    Name = "Collection Range",
    Range = {50, 500},
    Increment = 10,
    CurrentValue = 200,
    Callback = function(v) _G.Ysl.CollectRange = v end,
})

FarmTab:CreateSection("ğŸ’° Money & Selling")

FarmTab:CreateToggle({
    Name = "ğŸ’µ Auto-Collect Money",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.AutoMoney = v
        AutoFarm:StartMoney()
    end,
})

FarmTab:CreateToggle({
    Name = "ğŸª Auto-Sell (Every 5s)",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.AutoSell = v
        AutoFarm:StartAutoSell()
    end,
})

FarmTab:CreateSection("âš¡ Upgrades & Events")

FarmTab:CreateToggle({
    Name = "âš¡ Auto-Upgrade (All Slots)",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.AutoUpgrade = v
        AutoFarm:StartAutoUpgrade()
    end,
})

FarmTab:CreateToggle({
    Name = "ğŸ° Auto-Spin Wheel",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.AutoSpin = v
        AutoFarm:StartAutoSpin()
    end,
})

FarmTab:CreateSection("ğŸ Free Items")

FarmTab:CreateButton({
    Name = "ğŸ Claim Free Epic",
    Callback = function()
        Safe(function()
            local result = Paths.TakeFreeEpic:InvokeServer()
            Notify("Free Epic", result and "Claimed! ğŸ" or "Already claimed!", 3)
        end)
    end,
})

--// ESP TAB
ESPTab:CreateSection("ğŸ‘ï¸ ESP")

ESPTab:CreateToggle({
    Name = "ğŸ§  Brainrot ESP",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.BrainrotESP = v
        ESP:StartBrainrot()
    end,
})

ESPTab:CreateToggle({
    Name = "ğŸ”“ VIP Wall ESP",
    CurrentValue = false,
    Callback = function(v)
        _G.Ysl.VIPWallESP = v
        ESP:StartVIPWalls()
    end,
})

--// MISC TAB
MiscTab:CreateSection("ğŸ¨ Visual")

MiscTab:CreateButton({
    Name = "â˜€ï¸ Full Brightness",
    Callback = function()
        local L = game:GetService("Lighting")
        L.Brightness = 3
        L.ClockTime = 12
        L.FogEnd = 100000
    end,
})

MiscTab:CreateSection("ğŸ”— Links")

MiscTab:CreateButton({
    Name = "ğŸ“‹ Copy Discord",
    Callback = function()
        setclipboard("discord.gg/yslscripts")
        Notify("Copied", "discord.gg/yslscripts", 2)
    end,
})

MiscTab:CreateButton({
    Name = "ğŸ”‘ Copy Key",
    Callback = function()
        setclipboard("ysl_free_ot")
        Notify("Copied", "Key: ysl_free_ot", 2)
    end,
})

MiscTab:CreateSection("âš™ï¸ Utils")

MiscTab:CreateButton({
    Name = "ğŸ”„ Respawn",
    Callback = function() lplayer.Character:BreakJoints() end,
})

--// Character Respawn
lplayer.CharacterAdded:Connect(function(c)
    task.wait(1)
    character = c
    humanoid = c:WaitForChild("Humanoid")
    root = c:WaitForChild("HumanoidRootPart")
    
    if _G.Ysl.Speed then Movement:SetupSpeed() end
    if _G.Ysl.Fly then Movement:SetupFly() end
    if _G.Ysl.NoClip then Movement:SetupNoClip() end
    if _G.Ysl.VIPBypass then VIPBypass:Start() end
    if _G.Ysl.GodMode then Protection:SetupGodMode() end
    if _G.Ysl.WaveImmunity then Protection:SetupWaveImmunity() end
    if _G.Ysl.AntiVoid then Protection:SetupAntiVoid() end
    if _G.Ysl.AutoBrainrot then AutoFarm:StartBrainrot() end
    if _G.Ysl.AutoMoney then AutoFarm:StartMoney() end
    
    Notify("Respawned", "Systems restarted! âœ…", 2)
end)

--// Auto-start
Protection:SetupWaveImmunity()
Protection:SetupAntiVoid()

--// Final
Notify("âš¡ YslMenu V111", "Built with REAL game data! Everything works! ğŸ˜ˆ", 5)

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("  YslMenu V111 FINAL - ULTIMATE EDITION")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âœ… Using REAL game paths from scan")
print("âœ… ActiveBrainrots: Workspace.ActiveBrainrots")
print("âœ… VIPWalls: Workspace.VIPWalls (VIP & VIP_PLUS)")
print("âœ… Remotes: CollectMoney, SellAll, etc.")
print("âœ… All features 100% WORKING")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("ğŸ”¥ ysl on top ğŸ˜ˆ")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
